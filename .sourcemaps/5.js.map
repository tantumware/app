{"version":3,"sources":["../../src/pages/login/login.module.ts","../../src/utils/storage-keys.ts","../../src/pages/login/login.ts","../../src/models/account.ts"],"names":[],"mappings":"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","file":"5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { TranslateModule, TranslateLoader } from '@ngx-translate/core';\nimport { IonicPageModule } from 'ionic-angular';\n\nimport { LoginPage } from './login';\nimport { Http } from '@angular/http';\nimport { TranslateHttpLoader } from '@ngx-translate/http-loader';\n\nexport function TranslateLoaderFactory(http: Http) {\n  return new TranslateHttpLoader(http, './assets/i18n/', '.json');\n}\n\n@NgModule({\n  declarations: [\n    LoginPage\n  ],\n  imports: [\n    IonicPageModule.forChild(LoginPage),\n    TranslateModule.forChild(),\n    TranslateModule.forChild({\n      loader: {\n        provide: TranslateLoader,\n        useFactory: (TranslateLoaderFactory),\n        deps: [ Http ]\n      }\n    })\n  ],\n  exports: [\n    LoginPage\n  ]\n})\nexport class LoginPageModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.module.ts","export class StorageKeys {\n\n    public static CONSTRAINT: string = \"constraint\"; \n    public static RESULT: string = \"result\";\n    public static SCHEDULE: string = \"schedule\";\n    public static ACCOUNT: string = \"account\";\n    public static KEEP_LOGGED_IN: string = \"keep_loged_in\";\n    public static LANGUAGE: string = \"language\";\n    public static STATISTIC: string = \"statistic\";\n    public static ALL_SUBJECTS: string = \"all_subjects\";\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils/storage-keys.ts","import { LoginProvider } from './../../providers/login-provider/login-provider';\nimport { Account } from './../../models/account';\nimport { Component } from '@angular/core';\nimport { TranslateService } from '@ngx-translate/core';\nimport { IonicPage, NavController, ToastController, LoadingController } from 'ionic-angular';\nimport { Storage } from '@ionic/storage';\nimport { StorageKeys } from '../../utils/storage-keys';\n\n@IonicPage()\n@Component({\n  selector: 'page-login',\n  templateUrl: 'login.html'\n})\nexport class LoginPage {\n\n  showView: boolean = false;\n\n  username: string;\n  password: string;\n\n  idioma = \"pt\";\n\n  manterConectado: boolean = true;\n\n  constructor(public navCtrl: NavController,\n    public loginProvider: LoginProvider,\n    public toastCtrl: ToastController,\n    public translateService: TranslateService,\n    private storage: Storage,\n    public loadingCtrl: LoadingController) {\n\n    this.translateService.setDefaultLang('pt');\n\n    this.storage.get(StorageKeys.LANGUAGE).then(idioma => {\n      if (idioma) {\n        this.idioma = idioma;\n        this.translateService.use(this.idioma);\n      }\n    });\n  }\n\n  ionViewWillEnter() {\n    this.username = null;\n    this.password = null;\n    this.showView = false;\n\n    this.idioma = this.translateService.currentLang;\n    this.checkKeepLoggedIn();\n  }\n\n  checkKeepLoggedIn() {\n    this.storage.get(StorageKeys.ACCOUNT).then((acc) => {\n      this.storage.get(StorageKeys.KEEP_LOGGED_IN).then(b => {\n        this.manterConectado = b\n        if (acc && b) {\n          this.doLogin(acc);\n        } else {\n          this.showView = true;\n        }\n      });\n      \n    });\n  }\n\n  idiomaChanged(): void {\n    this.translateService.use(this.idioma);\n    this.storage.set(StorageKeys.LANGUAGE, this.idioma);\n  }\n\n  prepareLogin() {    \n    let userName = this.username == null ? \"\" : this.username;\n    let password = this.password == null ? \"\" : this.password;\n\n    let acc = new Account(userName, password);\n    this.doLogin(acc);\n  }\n\n  doLogin(acc: Account) {\n    this.storage.set(StorageKeys.KEEP_LOGGED_IN, this.manterConectado);\n    let loading = this.loadingCtrl.create({\n      content: 'Please wait...'\n    });      \n\n    let timeOutid = setTimeout(() => {\n      loading.present();\n    }, 300);\n\n    this.loginProvider.login(acc).subscribe(res => {\n      this.storage.set(StorageKeys.ACCOUNT, acc);\n      loading.dismiss();\n      clearTimeout(timeOutid);\n      this.navCtrl.push('MainPage');\n    }, err => {\n      loading.dismiss();\n      clearTimeout(timeOutid);\n      console.error('ERROR', err);\n      this.showView = true;\n      let toast = this.toastCtrl.create({\n        message: 'DEU RUIM',\n        duration: 3000,\n        position: 'top'\n      });\n      toast.present();\n    });\n\n  }\n\n  onSobreClick(): void {\n    this.navCtrl.push('SobrePage');\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.ts","export class Account {\n\n    constructor(public username: string, public password: string) { }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/models/account.ts"],"sourceRoot":""}